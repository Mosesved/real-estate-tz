<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Real Estate System</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- NAVIGATION -->
  <nav>
    <a href="index.html">Home</a>
    <a href="houses.html">Houses</a>
    <a href="plots.html">Plots</a>
    <a href="agents.html">Agents</a>
    <a href="ads.html">Ads</a>
    <a href="about.html">About Us</a>
    <a href="contact.html">Contact</a>
  </nav>

  <!-- HERO / HEADER -->
  <header>
    <h1>Find Houses & Plots in Tanzania</h1>
    <p>Trusted agents. Real properties.</p>
  </header>

  <!-- SEARCH BAR -->
  <section class="search-bar">
    <input type="text" placeholder="Search location...">
    <select>
      <option>All Types</option>
      <option>House</option>
      <option>Plot</option>
    </select>
    <button>Search</button>
  </section>

  <!-- PROPERTY LIST -->
  <section class="property-list" id="property-list">
    <p>Loading properties...</p>
  </section>

  <!-- FOOTER -->
  <footer>
    <p>&copy; 2026 Tanzania Real Estate Platform</p>
  </footer>

  <!-- LOAD LISTINGS FROM BACKEND -->
  <script>
    async function loadListings() {
      try {
        const res = await fetch("http://localhost:5000/api/listings");
        const listings = await res.json();

        const container = document.getElementById("property-list");
        container.innerHTML = "";

        listings.forEach(l => {
          container.innerHTML += `
            <div class="property-card">
              <img src="${l.image || 'images/house1.jpg'}" alt="Property">
              <h3>${l.title}</h3>
              <p><strong>Price:</strong> ${l.price}</p>
              <p><strong>Type:</strong> ${l.type}</p>
              <p><strong>Location:</strong> ${l.location}</p>
              <a href="property.html?id=${l._id}" class="btn">View Details</a>
            </div>
          `;
        });

      } catch (err) {
        console.error(err);
        document.getElementById("property-list").innerHTML =
          "<p>Failed to load properties.</p>";
      }
    }

    loadListings();
  </script>

</body>
</html>
